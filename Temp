import matplotlib.pyplot as plt

# sliding window 크기 설정
window_size = 60

# 결과를 저장할 리스트 생성
timestamps = []
scores = []

# sliding window 적용: index 0부터 (전체 길이 - window_size + 1)까지
for i in range(len(df) - window_size + 1):
    # 'DomeTC' 컬럼의 window를 2차원 배열 (n_samples, n_features)로 변환
    window_data = df['DomeTC'].iloc[i:i+window_size].values.reshape(-1, 1)
    
    # window에 대해 HMM 모델의 score 계산
    score = model.score(window_data)
    scores.append(score)
    
    # window의 대표 timestamp: window 중간값 사용
    mid_timestamp = df['DATE_TIME'].iloc[i + window_size // 2]
    timestamps.append(mid_timestamp)

# 플롯 생성
plt.figure(figsize=(12, 6))
plt.plot(timestamps, scores, marker='o', linestyle='-')
plt.xlabel('DATE_TIME')
plt.ylabel('HMM Model Score')
plt.title('Sliding Window HMM Model Score on DomeTC')
plt.grid(True)
plt.show()
